# Sola åŒ…ç®¡ç†å™¨è®¾è®¡æ–‡æ¡£

**ç‰ˆæœ¬**: v1.0  
**æ—¥æœŸ**: 2026-01-10  
**çŠ¶æ€**: è®¾è®¡é˜¶æ®µ

---

## ğŸ“‹ ç›®å½•

1. [æ¦‚è¿°](#æ¦‚è¿°)
2. [å®æ–½æ­¥éª¤ä¼˜åŒ–](#å®æ–½æ­¥éª¤ä¼˜åŒ–)
3. [é…ç½®æ–‡ä»¶è®¾è®¡](#é…ç½®æ–‡ä»¶è®¾è®¡)
4. [ç›®å½•ç»“æ„è®¾è®¡](#ç›®å½•ç»“æ„è®¾è®¡)
5. [å‘½ä»¤è¡Œæ¥å£è®¾è®¡](#å‘½ä»¤è¡Œæ¥å£è®¾è®¡)
6. [ä¾èµ–è§£æç®—æ³•](#ä¾èµ–è§£æç®—æ³•)
7. [ä¸­å¤®ä»“åº“è®¾è®¡](#ä¸­å¤®ä»“åº“è®¾è®¡)
8. [å®æ–½ç»†èŠ‚](#å®æ–½ç»†èŠ‚)

---

## æ¦‚è¿°

### è®¾è®¡ç›®æ ‡

- **ç®€å•æ˜“ç”¨**: ç±»ä¼¼ Go modules çš„ç®€æ´ä½“éªŒ
- **å»ä¸­å¿ƒåŒ–**: æ”¯æŒå¤šç§åŒ…æºï¼ˆä¸­å¤®ä»“åº“ã€Gitã€æœ¬åœ°è·¯å¾„ï¼‰
- **ç¡®å®šæ€§æ„å»º**: ä½¿ç”¨é”æ–‡ä»¶ä¿è¯å¯é‡ç°æ„å»º
- **å‘åå…¼å®¹**: ä¸ç°æœ‰ namespace/use è¯­æ³•æ— ç¼é›†æˆ
- **æ€§èƒ½ä¼˜åŒ–**: æœ¬åœ°ç¼“å­˜ã€å¹¶è¡Œä¸‹è½½

### æ ¸å¿ƒæ¦‚å¿µ

- **åŒ… (Package)**: ä¸€ä¸ªå¯å¤ç”¨çš„ä»£ç å•å…ƒï¼ŒåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå‘½åç©ºé—´
- **æ¨¡å— (Module)**: é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œç”± `sola.toml` å®šä¹‰
- **ä¾èµ– (Dependency)**: æ¨¡å—æ‰€éœ€çš„å¤–éƒ¨åŒ…
- **ä»“åº“ (Registry)**: å­˜å‚¨å’Œåˆ†å‘åŒ…çš„æœåŠ¡å™¨

---

## å®æ–½æ­¥éª¤ä¼˜åŒ–

### åŸè®¡åˆ’åˆ†æ

ä½ çš„åŸè®¡åˆ’ï¼š
1. âœ… æ·»åŠ  new/init å‘½ä»¤ç”Ÿæˆ toml
2. âœ… æµ‹è¯•æ ‡å‡†åº“å’Œé¡¹ç›®å‘½åç©ºé—´
3. âœ… æœ¬åœ°ç¬¬ä¸‰æ–¹åŒ…æµ‹è¯•
4. âœ… å®ç°ä¸­å¤®ä»“åº“
5. âœ… æµ‹è¯•äº‘ç«¯æ‹‰å–

**ä¼˜ç‚¹**: æ¸è¿›å¼å¼€å‘ï¼Œæ¯æ­¥å¯éªŒè¯  
**å»ºè®®ä¼˜åŒ–**: å¢åŠ é”æ–‡ä»¶ã€ç‰ˆæœ¬è§£æã€ç¼“å­˜æœºåˆ¶ç­‰å…³é”®ç¯èŠ‚

---

### ä¼˜åŒ–åçš„å®æ–½æ­¥éª¤

#### Phase 1: é¡¹ç›®åˆå§‹åŒ–ä¸é…ç½® (1-2 å¤©)

**ç›®æ ‡**: å»ºç«‹åŸºæœ¬çš„é¡¹ç›®é…ç½®ç³»ç»Ÿ

| æ­¥éª¤ | ä»»åŠ¡ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| 1.1 | è®¾è®¡ `sola.toml` æ ¼å¼ | é…ç½®æ–‡ä»¶è§„èŒƒæ–‡æ¡£ | ğŸ”´ P0 |
| 1.2 | å®ç° `sola init` å‘½ä»¤ | ç”Ÿæˆæ ‡å‡†çš„ sola.toml | ğŸ”´ P0 |
| 1.3 | å®ç° `sola new <name>` å‘½ä»¤ | åˆ›å»ºå®Œæ•´é¡¹ç›®ç»“æ„ | ğŸ”´ P0 |
| 1.4 | å®ç°é…ç½®æ–‡ä»¶è§£æå™¨ | èƒ½æ­£ç¡®è¯»å– toml é…ç½® | ğŸ”´ P0 |
| 1.5 | ç¼–å†™å•å…ƒæµ‹è¯• | æµ‹è¯•è¦†ç›– 80% | ğŸŸ  P1 |

**äº§å‡ºç‰©**:
- [x] `sola.toml` è§„èŒƒæ–‡æ¡£
- [x] `sola init` å‘½ä»¤å®ç°
- [x] `sola new` å‘½ä»¤å®ç°
- [x] TOML è§£æåº“é›†æˆ

**æµ‹è¯•éªŒè¯**:
```bash
# æµ‹è¯• init
cd /tmp/test-project
sola init --name my.app --version 0.1.0

# æµ‹è¯• new
sola new hello-world
cd hello-world
ls -la  # åº”è¯¥çœ‹åˆ° sola.toml å’Œ src/main.sola
```

---

#### Phase 2: æœ¬åœ°é¡¹ç›®ä¾èµ–ç®¡ç† (2-3 å¤©)

**ç›®æ ‡**: æ”¯æŒé¡¹ç›®å†…éƒ¨å’Œæ ‡å‡†åº“çš„å¯¼å…¥

| æ­¥éª¤ | ä»»åŠ¡ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| 2.1 | å®ç°æ¨¡å—è·¯å¾„è§£æ | æ­£ç¡®è§£æ namespace â†’ æ–‡ä»¶è·¯å¾„ | ğŸ”´ P0 |
| 2.2 | æ”¯æŒé¡¹ç›®å†… use è¯­å¥ | èƒ½å¯¼å…¥åŒé¡¹ç›®å…¶ä»–æ–‡ä»¶ | ğŸ”´ P0 |
| 2.3 | æ”¯æŒæ ‡å‡†åº“å¯¼å…¥ | `use sola.json.Json` æ­£å¸¸å·¥ä½œ | ğŸ”´ P0 |
| 2.4 | å®ç° `sola check` å¢å¼º | æ£€æŸ¥å¯¼å…¥æ˜¯å¦æœ‰æ•ˆ | ğŸŸ  P1 |
| 2.5 | æ·»åŠ è·¯å¾„æ˜ å°„é…ç½® | æ”¯æŒè‡ªå®šä¹‰è·¯å¾„åˆ«å | ğŸŸ¡ P2 |

**äº§å‡ºç‰©**:
- [x] æ¨¡å—åŠ è½½å™¨ (ModuleLoader)
- [x] è·¯å¾„è§£æå™¨ (PathResolver)
- [x] å¯¼å…¥æ ¡éªŒå™¨ (ImportValidator)

**æµ‹è¯•éªŒè¯**:
```sola
// src/utils/Helper.sola
namespace my.app.utils

public class Helper {
    public static function greet(): string {
        return "Hello";
    }
}

// src/main.sola
namespace my.app

use my.app.utils.Helper;
use sola.json.Json;

function main(): void {
    echo Helper::greet();  // âœ… åº”è¯¥å·¥ä½œ
    $data := ["test" => 1];
    echo Json::encode($data);  // âœ… åº”è¯¥å·¥ä½œ
}
```

---

#### Phase 3: æœ¬åœ°ç¬¬ä¸‰æ–¹åŒ…æ”¯æŒ (3-4 å¤©)

**ç›®æ ‡**: æ”¯æŒæœ¬åœ°è·¯å¾„çš„ç¬¬ä¸‰æ–¹åŒ…ä¾èµ–

| æ­¥éª¤ | ä»»åŠ¡ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| 3.1 | è®¾è®¡æœ¬åœ°ç¼“å­˜ç›®å½•ç»“æ„ | `~/.sola/packages/` è§„èŒƒ | ğŸ”´ P0 |
| 3.2 | å®ç° `[dependencies]` è§£æ | è¯»å–ä¾èµ–é…ç½® | ğŸ”´ P0 |
| 3.3 | å®ç°æœ¬åœ°è·¯å¾„ä¾èµ– | `path = "../lib"` å·¥ä½œ | ğŸ”´ P0 |
| 3.4 | ç”Ÿæˆ `sola.lock` æ–‡ä»¶ | é”å®šä¾èµ–ç‰ˆæœ¬ | ğŸ”´ P0 |
| 3.5 | å®ç° `sola tidy` å‘½ä»¤ | æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ– | ğŸŸ¡ P2 |

**æœ¬åœ°åŒ…ç›®å½•è§„èŒƒ**:
```
~/.sola/
â”œâ”€â”€ packages/          # æœ¬åœ°åŒ…ç¼“å­˜
â”‚   â”œâ”€â”€ github.com/
â”‚   â”‚   â””â”€â”€ user/
â”‚   â”‚       â””â”€â”€ repo@v1.0.0/
â”‚   â”‚           â”œâ”€â”€ sola.toml
â”‚   â”‚           â””â”€â”€ src/
â”‚   â””â”€â”€ local/         # æ‰‹åŠ¨æ”¾ç½®çš„æœ¬åœ°åŒ…
â”‚       â””â”€â”€ my-lib@1.0.0/
â””â”€â”€ registry/          # ä»“åº“å…ƒæ•°æ®ç¼“å­˜
    â””â”€â”€ index/
```

**äº§å‡ºç‰©**:
- [x] ä¾èµ–è§£æå™¨ (DependencyResolver)
- [x] é”æ–‡ä»¶ç”Ÿæˆå™¨ (LockfileGenerator)
- [x] æœ¬åœ°åŒ…ç®¡ç†å™¨ (LocalPackageManager)

**æµ‹è¯•éªŒè¯**:
```bash
# æ‰‹åŠ¨åˆ›å»ºæµ‹è¯•åŒ…
mkdir -p ~/.sola/packages/local/test-lib@1.0.0
cat > ~/.sola/packages/local/test-lib@1.0.0/sola.toml <<EOF
[package]
name = "test.lib"
version = "1.0.0"
EOF

# åœ¨é¡¹ç›®ä¸­ä½¿ç”¨
# sola.toml:
# [dependencies]
# test-lib = { path = "~/.sola/packages/local/test-lib@1.0.0" }

sola run src/main.sola  # åº”è¯¥èƒ½æ‰¾åˆ° test.lib å‘½åç©ºé—´
```

---

#### Phase 4: ç‰ˆæœ¬ç®¡ç†ä¸è§£æ (2-3 å¤©)

**ç›®æ ‡**: å®ç°è¯­ä¹‰åŒ–ç‰ˆæœ¬è§£æå’Œä¾èµ–å†²çªæ£€æµ‹

| æ­¥éª¤ | ä»»åŠ¡ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| 4.1 | å®ç° SemVer ç‰ˆæœ¬è§£æ | æ”¯æŒ `^1.2.3`, `~1.2.3` ç­‰ | ğŸ”´ P0 |
| 4.2 | å®ç°ä¾èµ–å›¾æ„å»º | æ£€æµ‹å¾ªç¯ä¾èµ– | ğŸ”´ P0 |
| 4.3 | å®ç°ç‰ˆæœ¬å†²çªè§£å†³ | é€‰æ‹©æœ€ä¼˜ç‰ˆæœ¬ | ğŸ”´ P0 |
| 4.4 | å®ç° `sola graph` å‘½ä»¤ | å¯è§†åŒ–ä¾èµ–æ ‘ | ğŸŸ¡ P2 |
| 4.5 | æ·»åŠ è¯¦ç»†é”™è¯¯æç¤º | ä¾èµ–å†²çªæ—¶ç»™å‡ºè§£å†³æ–¹æ¡ˆ | ğŸŸ  P1 |

**ç‰ˆæœ¬çº¦æŸè¯­æ³•**:
```toml
[dependencies]
# ç²¾ç¡®ç‰ˆæœ¬
json-parser = "1.2.3"

# å…¼å®¹ç‰ˆæœ¬ (>=1.2.3, <2.0.0)
http-client = "^1.2.3"

# è¡¥ä¸ç‰ˆæœ¬ (>=1.2.3, <1.3.0)
logger = "~1.2.3"

# èŒƒå›´ç‰ˆæœ¬
crypto = ">=1.0.0, <2.0.0"

# é€šé…ç¬¦
utils = "1.x"
```

**äº§å‡ºç‰©**:
- [x] SemVer è§£æå™¨
- [x] ä¾èµ–å›¾æ„å»ºå™¨
- [x] ç‰ˆæœ¬é€‰æ‹©ç®—æ³•

---

#### Phase 5: ä¸­å¤®ä»“åº“æ”¯æŒ (5-7 å¤©)

**ç›®æ ‡**: å®ç°ä»äº‘ç«¯ä»“åº“ä¸‹è½½åŒ…

| æ­¥éª¤ | ä»»åŠ¡ | éªŒæ”¶æ ‡å‡† | ä¼˜å…ˆçº§ |
|------|------|----------|--------|
| 5.1 | è®¾è®¡ä»“åº“ API åè®® | RESTful API è§„èŒƒ | ğŸ”´ P0 |
| 5.2 | å®ç°åŒ…å…ƒæ•°æ®æœåŠ¡ | æŸ¥è¯¢åŒ…ä¿¡æ¯ | ğŸ”´ P0 |
| 5.3 | å®ç°åŒ…ä¸‹è½½å™¨ | ä¸‹è½½ã€è§£å‹ã€éªŒè¯ | ğŸ”´ P0 |
| 5.4 | å®ç°åŒ…å‘å¸ƒ `sola publish` | ä¸Šä¼ åŒ…åˆ°ä»“åº“ | ğŸ”´ P0 |
| 5.5 | å®ç°åŒ…æœç´¢ `sola search` | æœç´¢å¯ç”¨åŒ… | ğŸŸ  P1 |
| 5.6 | æ·»åŠ åŒ…ç­¾åéªŒè¯ | é˜²æ­¢æ¶æ„åŒ… | ğŸŸ  P1 |
| 5.7 | å®ç°å¢é‡æ›´æ–° | åªä¸‹è½½å˜æ›´éƒ¨åˆ† | ğŸŸ¡ P2 |

**ä»“åº“ API è®¾è®¡**:
```
GET  /api/v1/packages/<name>              # è·å–åŒ…ä¿¡æ¯
GET  /api/v1/packages/<name>/versions     # è·å–ç‰ˆæœ¬åˆ—è¡¨
GET  /api/v1/packages/<name>/<version>    # è·å–ç‰¹å®šç‰ˆæœ¬
POST /api/v1/packages                     # å‘å¸ƒåŒ…
GET  /api/v1/search?q=<query>             # æœç´¢åŒ…
```

**äº§å‡ºç‰©**:
- [x] ä»“åº“å®¢æˆ·ç«¯ (RegistryClient)
- [x] ä¸‹è½½ç®¡ç†å™¨ (DownloadManager)
- [x] åŒ…éªŒè¯å™¨ (PackageValidator)
- [x] å‘å¸ƒå·¥å…· (Publisher)

**æµ‹è¯•éªŒè¯**:
```bash
# æœç´¢åŒ…
sola search json

# å®‰è£…åŒ…
sola get github.com/user/awesome-lib@1.2.3

# å‘å¸ƒåŒ…
sola publish --token <your-token>
```

---

#### Phase 6: é«˜çº§ç‰¹æ€§ (æŒç»­)

**ç›®æ ‡**: æå‡ç”¨æˆ·ä½“éªŒå’Œæ€§èƒ½

| æ­¥éª¤ | ä»»åŠ¡ | ä¼˜å…ˆçº§ |
|------|------|--------|
| 6.1 | å¹¶è¡Œä¸‹è½½å¤šä¸ªåŒ… | ğŸŸ  P1 |
| 6.2 | æ–­ç‚¹ç»­ä¼ æ”¯æŒ | ğŸŸ¡ P2 |
| 6.3 | CDN åŠ é€Ÿ | ğŸŸ¡ P2 |
| 6.4 | ç§æœ‰ä»“åº“æ”¯æŒ | ğŸŸ  P1 |
| 6.5 | Workspace æ”¯æŒ (monorepo) | ğŸŸ¡ P2 |
| 6.6 | åŒ…é•œåƒæºé…ç½® | ğŸŸ  P1 |
| 6.7 | è‡ªåŠ¨æ›´æ–°æ£€æµ‹ | ğŸŸ¡ P2 |

---

## é…ç½®æ–‡ä»¶è®¾è®¡

### sola.toml å®Œæ•´è§„èŒƒ

```toml
# ============================================================================
# åŒ…ä¿¡æ¯ (å¿…éœ€)
# ============================================================================
[package]
# åŒ…åï¼ˆå¿…éœ€ï¼‰- ä½¿ç”¨ç‚¹åˆ†å‘½åç©ºé—´æ ¼å¼
name = "my.awesome.app"

# ç‰ˆæœ¬ï¼ˆå¿…éœ€ï¼‰- éµå¾ªè¯­ä¹‰åŒ–ç‰ˆæœ¬è§„èŒƒ (SemVer)
version = "1.2.3"

# æè¿°ï¼ˆå¯é€‰ï¼‰
description = "A modern web application framework for Sola"

# ä½œè€…åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
authors = [
    "Zhang San <zhangsan@example.com>",
    "Li Si <lisi@example.com>"
]

# è®¸å¯è¯ï¼ˆå¯é€‰ï¼‰- SPDX æ ‡è¯†ç¬¦
license = "MIT"

# é¡¹ç›®ä¸»é¡µï¼ˆå¯é€‰ï¼‰
homepage = "https://github.com/myorg/awesome-app"

# ä»£ç ä»“åº“ï¼ˆå¯é€‰ï¼‰
repository = "https://github.com/myorg/awesome-app.git"

# æ–‡æ¡£é“¾æ¥ï¼ˆå¯é€‰ï¼‰
documentation = "https://docs.example.com/awesome-app"

# å…³é”®è¯ï¼ˆå¯é€‰ï¼‰- ç”¨äºæœç´¢
keywords = ["web", "framework", "http", "server"]

# åˆ†ç±»ï¼ˆå¯é€‰ï¼‰
categories = ["web-programming", "frameworks"]

# README æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰- é»˜è®¤ README.md
readme = "README.md"

# æœ€ä½ Sola ç‰ˆæœ¬è¦æ±‚ï¼ˆå¯é€‰ï¼‰
sola-version = ">=0.1.0"

# æ˜¯å¦å‘å¸ƒï¼ˆå¯é€‰ï¼‰- ç§æœ‰åŒ…è®¾ä¸º false
publish = true

# å…¥å£æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰- é»˜è®¤ src/main.sola
main = "src/main.sola"

# ============================================================================
# ä¾èµ–é…ç½®
# ============================================================================
[dependencies]
# ä»ä¸­å¤®ä»“åº“å®‰è£…ï¼ˆä½¿ç”¨è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰
json-parser = "^2.1.0"
http-client = "~1.5.0"

# ä» Git ä»“åº“å®‰è£…
web-framework = { git = "https://github.com/org/web-framework.git", tag = "v3.2.1" }

# ä» Git ç‰¹å®šåˆ†æ”¯
logging = { git = "https://github.com/org/logging.git", branch = "main" }

# ä» Git ç‰¹å®šæäº¤
utils = { git = "https://github.com/org/utils.git", rev = "abc123def" }

# ä»æœ¬åœ°è·¯å¾„å®‰è£…
my-lib = { path = "../my-lib" }

# ä»è‡ªå®šä¹‰ä»“åº“å®‰è£…
custom-pkg = { registry = "https://my-registry.com", version = "1.0.0" }

# å¯é€‰ä¾èµ–ï¼ˆç”¨äºç‰¹æ€§å¼€å…³ï¼‰
database-mysql = { version = "2.0.0", optional = true }

# ============================================================================
# å¼€å‘ä¾èµ–ï¼ˆä»…å¼€å‘æ—¶ä½¿ç”¨ï¼Œä¸ä¼šè¢«ä¾èµ–è€…å®‰è£…ï¼‰
# ============================================================================
[dev-dependencies]
test-framework = "1.0.0"
mock-server = "0.5.0"
benchmark = "2.1.0"

# ============================================================================
# æ„å»ºé…ç½®
# ============================================================================
[build]
# æºä»£ç ç›®å½•ï¼ˆå¯é€‰ï¼‰- é»˜è®¤ src
source-dir = "src"

# è¾“å‡ºç›®å½•ï¼ˆå¯é€‰ï¼‰- é»˜è®¤ build
output-dir = "build"

# åŒ…å«æ–‡ä»¶æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
include = [
    "src/**/*.sola",
    "lib/**/*.sola",
    "README.md",
    "LICENSE"
]

# æ’é™¤æ–‡ä»¶æ¨¡å¼ï¼ˆå¯é€‰ï¼‰
exclude = [
    "**/*_test.sola",
    "examples/**",
    "docs/**"
]

# ä¼˜åŒ–çº§åˆ«ï¼ˆå¯é€‰ï¼‰- 0-3
optimization = 2

# æ˜¯å¦å¯ç”¨ JITï¼ˆå¯é€‰ï¼‰
jit = true

# è‡ªå®šä¹‰æ„å»ºè„šæœ¬ï¼ˆå¯é€‰ï¼‰
build-script = "scripts/build.sola"

# ============================================================================
# è·¯å¾„æ˜ å°„ï¼ˆç±»ä¼¼ TypeScript çš„ pathsï¼‰
# ============================================================================
[paths]
# è‡ªå®šä¹‰è·¯å¾„åˆ«å
"@app/*" = "src/*"
"@lib/*" = "lib/*"
"@test/*" = "tests/*"

# ============================================================================
# ç‰¹æ€§å¼€å…³ (Features)
# ============================================================================
[features]
# é»˜è®¤å¯ç”¨çš„ç‰¹æ€§
default = ["json", "http"]

# ç‰¹æ€§å®šä¹‰
json = ["json-parser"]
http = ["http-client"]
mysql = ["database-mysql"]
full = ["json", "http", "mysql"]

# ============================================================================
# ä»“åº“é…ç½®
# ============================================================================
[registry]
# é»˜è®¤ä»“åº“ï¼ˆå¯é€‰ï¼‰
default = "https://registry.sola-lang.org"

# è‡ªå®šä¹‰ä»“åº“åˆ—è¡¨ï¼ˆå¯é€‰ï¼‰
[[registry.sources]]
name = "official"
url = "https://registry.sola-lang.org"
priority = 100

[[registry.sources]]
name = "company"
url = "https://packages.mycompany.com"
priority = 50

[[registry.sources]]
name = "mirror"
url = "https://mirrors.example.com/sola"
priority = 30

# ============================================================================
# Workspace é…ç½®ï¼ˆMonorepo æ”¯æŒï¼‰
# ============================================================================
[workspace]
# å­é¡¹ç›®åˆ—è¡¨
members = [
    "packages/core",
    "packages/http",
    "packages/database"
]

# æ’é™¤çš„ç›®å½•
exclude = [
    "examples/*",
    "tests/*"
]

# ============================================================================
# è„šæœ¬å‘½ä»¤
# ============================================================================
[scripts]
# è‡ªå®šä¹‰å‘½ä»¤
test = "sola run tests/run_all.sola"
bench = "sola run benchmarks/main.sola"
lint = "sola check --strict"
docs = "sola doc --output ./docs"

# ============================================================================
# å…ƒæ•°æ®ï¼ˆä»»æ„è‡ªå®šä¹‰å­—æ®µï¼‰
# ============================================================================
[metadata]
# å¯ä»¥æ·»åŠ ä»»æ„è‡ªå®šä¹‰å­—æ®µ
ci = "https://ci.example.com/myapp"
badge = "https://img.shields.io/badge/status-stable-green"
```

---

### sola.lock é”æ–‡ä»¶æ ¼å¼

```toml
# æ­¤æ–‡ä»¶ç”± sola è‡ªåŠ¨ç”Ÿæˆï¼Œè¯·å‹¿æ‰‹åŠ¨ç¼–è¾‘
# é”å®šä¾èµ–çš„ç²¾ç¡®ç‰ˆæœ¬ï¼Œç¡®ä¿æ„å»ºå¯é‡ç°

# é”æ–‡ä»¶ç‰ˆæœ¬
version = 1

# Sola ç‰ˆæœ¬
sola-version = "0.1.0"

# ç”Ÿæˆæ—¶é—´
generated-at = "2026-01-10T14:30:00Z"

# ============================================================================
# ä¾èµ–åŒ…åˆ—è¡¨
# ============================================================================

[[package]]
name = "json-parser"
version = "2.1.5"
source = "registry+https://registry.sola-lang.org"
checksum = "sha256:abc123def456..."
dependencies = []

[[package]]
name = "http-client"
version = "1.5.3"
source = "registry+https://registry.sola-lang.org"
checksum = "sha256:def789ghi012..."
dependencies = ["json-parser"]

[[package]]
name = "web-framework"
version = "3.2.1"
source = "git+https://github.com/org/web-framework.git?tag=v3.2.1"
checksum = "sha256:ghi345jkl678..."
dependencies = ["http-client", "logging"]

[[package]]
name = "logging"
version = "0.8.2"
source = "git+https://github.com/org/logging.git?branch=main#abc123"
checksum = "sha256:jkl901mno234..."
dependencies = []

[[package]]
name = "my-lib"
version = "1.0.0"
source = "path+../my-lib"
checksum = "sha256:mno567pqr890..."
dependencies = []

# ============================================================================
# ä¾èµ–æ ‘ï¼ˆç”¨äºè°ƒè¯•ï¼‰
# ============================================================================
[root]
dependencies = [
    "json-parser 2.1.5",
    "http-client 1.5.3",
    "web-framework 3.2.1",
    "my-lib 1.0.0"
]
```

---

### .sola/config.toml å…¨å±€é…ç½®

å­˜æ”¾åœ¨ç”¨æˆ·ç›®å½• `~/.sola/config.toml`ï¼š

```toml
# ============================================================================
# å…¨å±€ Sola é…ç½®æ–‡ä»¶
# ============================================================================

# åŒ…ç¼“å­˜ç›®å½•
[cache]
dir = "~/.sola/packages"
max-size = "10GB"
auto-clean = true

# ä»“åº“é…ç½®
[registry]
default = "https://registry.sola-lang.org"

# é•œåƒæºé…ç½®
[[mirrors]]
source = "https://registry.sola-lang.org"
mirror = "https://mirrors.tuna.tsinghua.edu.cn/sola"

# ç½‘ç»œé…ç½®
[network]
timeout = 30
retry = 3
proxy = ""  # HTTP ä»£ç†ï¼Œç•™ç©ºåˆ™ä¸ä½¿ç”¨

# ç”¨æˆ·è®¤è¯
[auth]
token = ""  # å‘å¸ƒåŒ…æ—¶ä½¿ç”¨çš„ token

# å…¨å±€è·¯å¾„æ˜ å°„
[paths]
stdlib = "/usr/local/lib/sola/std"

# æ—¥å¿—é…ç½®
[logging]
level = "info"  # trace, debug, info, warn, error
file = "~/.sola/sola.log"
```

---

## ç›®å½•ç»“æ„è®¾è®¡

### é¡¹ç›®ç›®å½•ç»“æ„

```
my-app/
â”œâ”€â”€ sola.toml              # é¡¹ç›®é…ç½®æ–‡ä»¶ï¼ˆå¿…éœ€ï¼‰
â”œâ”€â”€ sola.lock              # ä¾èµ–é”æ–‡ä»¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ README.md              # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ LICENSE                # è®¸å¯è¯
â”œâ”€â”€ .gitignore             # Git å¿½ç•¥æ–‡ä»¶
â”‚
â”œâ”€â”€ src/                   # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ main.sola          # ä¸»å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ app.sola           # åº”ç”¨é€»è¾‘
â”‚   â”œâ”€â”€ models/            # æ¨¡å‹
â”‚   â”‚   â””â”€â”€ User.sola
â”‚   â”œâ”€â”€ controllers/       # æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ UserController.sola
â”‚   â””â”€â”€ utils/             # å·¥å…·ç±»
â”‚       â””â”€â”€ Helper.sola
â”‚
â”œâ”€â”€ lib/                   # é¡¹ç›®å†…éƒ¨åº“ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ internal/
â”‚       â””â”€â”€ Logger.sola
â”‚
â”œâ”€â”€ tests/                 # æµ‹è¯•æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ unit/
â”‚   â”‚   â””â”€â”€ UserTest.sola
â”‚   â””â”€â”€ integration/
â”‚       â””â”€â”€ ApiTest.sola
â”‚
â”œâ”€â”€ examples/              # ç¤ºä¾‹ä»£ç ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ hello.sola
â”‚
â”œâ”€â”€ docs/                  # æ–‡æ¡£ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ api.md
â”‚
â”œâ”€â”€ scripts/               # è„šæœ¬ï¼ˆå¯é€‰ï¼‰
â”‚   â””â”€â”€ deploy.sola
â”‚
â”œâ”€â”€ build/                 # æ„å»ºè¾“å‡ºï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”‚   â”œâ”€â”€ main.solac         # ç¼–è¯‘åçš„å­—èŠ‚ç 
â”‚   â””â”€â”€ main               # å¯æ‰§è¡Œæ–‡ä»¶
â”‚
â””â”€â”€ .sola/                 # Sola æœ¬åœ°é…ç½®ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    â””â”€â”€ cache/             # æœ¬åœ°ç¼“å­˜
```

### åŒ…ç›®å½•ç»“æ„ï¼ˆå‘å¸ƒåˆ°ä»“åº“çš„åŒ…ï¼‰

```
awesome-lib/
â”œâ”€â”€ sola.toml              # å¿…éœ€
â”œâ”€â”€ README.md              # å¼ºçƒˆæ¨è
â”œâ”€â”€ LICENSE                # å¿…éœ€ï¼ˆå¼€æºåŒ…ï¼‰
â”œâ”€â”€ CHANGELOG.md           # æ¨è
â”‚
â””â”€â”€ src/                   # å¿…éœ€
    â”œâ”€â”€ lib.sola           # åº“å…¥å£
    â”œâ”€â”€ core/
    â”‚   â””â”€â”€ Engine.sola
    â””â”€â”€ utils/
        â””â”€â”€ Helper.sola
```

### æœ¬åœ°ç¼“å­˜ç›®å½•ç»“æ„

```
~/.sola/
â”œâ”€â”€ config.toml            # å…¨å±€é…ç½®
â”œâ”€â”€ sola.log               # æ—¥å¿—æ–‡ä»¶
â”‚
â”œâ”€â”€ packages/              # åŒ…ç¼“å­˜
â”‚   â”œâ”€â”€ registry/
â”‚   â”‚   â””â”€â”€ json-parser/
â”‚   â”‚       â”œâ”€â”€ 2.1.0/
â”‚   â”‚       â”‚   â”œâ”€â”€ sola.toml
â”‚   â”‚       â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ 2.1.5/
â”‚   â”‚       â””â”€â”€ 2.2.0/
â”‚   â”œâ”€â”€ git/
â”‚   â”‚   â””â”€â”€ github.com/
â”‚   â”‚       â””â”€â”€ org/
â”‚   â”‚           â””â”€â”€ repo/
â”‚   â”‚               â””â”€â”€ abc123def/
â”‚   â””â”€â”€ local/
â”‚       â””â”€â”€ my-lib/
â”‚           â””â”€â”€ 1.0.0/
â”‚
â”œâ”€â”€ registry/              # ä»“åº“å…ƒæ•°æ®
â”‚   â”œâ”€â”€ index/
â”‚   â”‚   â””â”€â”€ json-parser.json
â”‚   â””â”€â”€ cache/
â”‚       â””â”€â”€ search_cache.json
â”‚
â””â”€â”€ tmp/                   # ä¸´æ—¶æ–‡ä»¶
    â””â”€â”€ downloads/
```

---

## å‘½ä»¤è¡Œæ¥å£è®¾è®¡

### sola init - åˆå§‹åŒ–é¡¹ç›®

```bash
# ç”¨æ³•
sola init [namespace]

# ç¤ºä¾‹
sola init                         # ä½¿ç”¨é»˜è®¤å‘½åç©ºé—´ company.project
sola init my.app                  # æŒ‡å®šå‘½åç©ºé—´ä¸º my.app
sola init com.github.user.project # æ›´è¯¦ç»†çš„å‘½åç©ºé—´

# å¯é€‰å‚æ•°
sola init --name my-project       # æŒ‡å®šé¡¹ç›®åç§°
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ‰ åˆå§‹åŒ– Sola é¡¹ç›®...
ğŸ“ é¡¹ç›®åç§°: my-project
ğŸ“¦ ç‰ˆæœ¬å·: 0.1.0
âœ… å·²åˆ›å»º sola.toml
âœ… å·²åˆ›å»º src/main.sola
âœ¨ é¡¹ç›®åˆå§‹åŒ–æˆåŠŸï¼

ä¸‹ä¸€æ­¥:
  sola run src/main.sola  # è¿è¡Œé¡¹ç›®
  sola check              # æ£€æŸ¥ä»£ç 
```

---

### sola new - åˆ›å»ºæ–°é¡¹ç›®

```bash
# åˆ›å»ºæ–°é¡¹ç›®
sola new my-project

# ä»æ¨¡æ¿åˆ›å»º
sola new my-app --template web

# æŒ‡å®šç›®å½•
sola new my-app --path /path/to/project
```

**æ”¯æŒçš„æ¨¡æ¿**:
- `basic`: åŸºç¡€é¡¹ç›®ï¼ˆé»˜è®¤ï¼‰
- `web`: Web åº”ç”¨
- `api`: RESTful API æœåŠ¡
- `cli`: å‘½ä»¤è¡Œå·¥å…·
- `lib`: åº“é¡¹ç›®

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸš€ åˆ›å»ºæ–°é¡¹ç›®: my-project
ğŸ“‚ ä½¿ç”¨æ¨¡æ¿: basic
âœ… åˆ›å»ºç›®å½•ç»“æ„
âœ… ç”Ÿæˆ sola.toml
âœ… ç”Ÿæˆ src/main.sola
âœ… ç”Ÿæˆ README.md
âœ¨ é¡¹ç›®åˆ›å»ºæˆåŠŸï¼

å¼€å§‹ä½¿ç”¨:
  cd my-project
  sola run src/main.sola
```

---

### sola get - å®‰è£…ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–ï¼ˆæ ¹æ® sola.tomlï¼‰
sola get

# å®‰è£…ç‰¹å®šåŒ…
sola get json-parser

# å®‰è£…æŒ‡å®šç‰ˆæœ¬
sola get json-parser@2.1.0

# ä» Git å®‰è£…
sola get github.com/org/repo@v1.0.0

# å®‰è£…å¹¶æ·»åŠ åˆ° dependencies
sola get json-parser --save

# å®‰è£…å¹¶æ·»åŠ åˆ° dev-dependencies
sola get test-framework --save-dev
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ“¦ æ­£åœ¨å®‰è£…ä¾èµ–...
â¬‡ï¸  json-parser@2.1.5
â¬‡ï¸  http-client@1.5.3
âœ… å·²ä¸‹è½½ 2 ä¸ªåŒ… (å…± 1.2 MB)
ğŸ”’ å·²æ›´æ–° sola.lock
âœ¨ å®‰è£…å®Œæˆï¼
```

---

### sola publish - å‘å¸ƒåŒ…

```bash
# å‘å¸ƒå½“å‰é¡¹ç›®
sola publish

# å‘å¸ƒåˆ°æŒ‡å®šä»“åº“
sola publish --registry https://my-registry.com

# ä½¿ç”¨ token è®¤è¯
sola publish --token <your-token>

# é¢„å‘å¸ƒï¼ˆä¸å®é™…ä¸Šä¼ ï¼‰
sola publish --dry-run
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ“¦ å‡†å¤‡å‘å¸ƒ: my.awesome.lib v1.2.3
ğŸ” æ£€æŸ¥é¡¹ç›®é…ç½®...
âœ… é¡¹ç›®é…ç½®æœ‰æ•ˆ
ğŸ” è¿è¡Œæµ‹è¯•...
âœ… æµ‹è¯•é€šè¿‡
ğŸ“ æ‰“åŒ…æ–‡ä»¶...
âœ… å·²åˆ›å»º: my.awesome.lib-1.2.3.tar.gz (245 KB)
â¬†ï¸  ä¸Šä¼ åˆ°: https://registry.sola-lang.org
âœ… å‘å¸ƒæˆåŠŸï¼

åŒ…é“¾æ¥: https://registry.sola-lang.org/packages/my.awesome.lib
```

---

### sola search - æœç´¢åŒ…

```bash
# æœç´¢åŒ…
sola search json

# æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯
sola search json --verbose

# é™åˆ¶ç»“æœæ•°é‡
sola search http --limit 10
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ” æœç´¢ç»“æœ: "json"

1. json-parser v2.1.5
   é«˜æ€§èƒ½ JSON è§£æåº“
   â­ 1.2k  ğŸ“¦ 50k  ğŸ“… 2026-01-05

2. json-schema v1.0.3
   JSON Schema éªŒè¯å™¨
   â­ 856  ğŸ“¦ 12k  ğŸ“… 2025-12-20

3. json-rpc v0.5.1
   JSON-RPC 2.0 å®ç°
   â­ 324  ğŸ“¦ 5k   ğŸ“… 2025-11-15

æ‰¾åˆ° 3 ä¸ªåŒ…ã€‚ä½¿ç”¨ 'sola get <package>' å®‰è£…ã€‚
```

---

### sola update - æ›´æ–°ä¾èµ–

```bash
# æ›´æ–°æ‰€æœ‰ä¾èµ–
sola update

# æ›´æ–°ç‰¹å®šåŒ…
sola update json-parser

# æ£€æŸ¥å¯æ›´æ–°çš„åŒ…
sola update --check
```

---

### sola graph - ä¾èµ–å›¾

```bash
# æ˜¾ç¤ºä¾èµ–æ ‘
sola graph

# è¾“å‡ºä¸ºå›¾ç‰‡
sola graph --output deps.png

# åªæ˜¾ç¤ºç›´æ¥ä¾èµ–
sola graph --depth 1
```

**è¾“å‡ºç¤ºä¾‹**:
```
my.app v1.0.0
â”œâ”€â”€ json-parser v2.1.5
â”œâ”€â”€ http-client v1.5.3
â”‚   â””â”€â”€ json-parser v2.1.5 (*)
â””â”€â”€ web-framework v3.2.1
    â”œâ”€â”€ http-client v1.5.3 (*)
    â””â”€â”€ logging v0.8.2

(*) é‡å¤ä¾èµ–
```

---

### sola tidy - æ¸…ç†ä¾èµ–

```bash
# æ¸…ç†æœªä½¿ç”¨çš„ä¾èµ–
sola tidy

# æ¸…ç†ç¼“å­˜
sola tidy --cache

# æ¸…ç†æ‰€æœ‰ï¼ˆä¾èµ– + ç¼“å­˜ï¼‰
sola tidy --all
```

---

## ä¾èµ–è§£æç®—æ³•

### ç‰ˆæœ¬è§£æè§„åˆ™

#### 1. è¯­ä¹‰åŒ–ç‰ˆæœ¬ (SemVer)

æ ¼å¼: `MAJOR.MINOR.PATCH`

**ç‰ˆæœ¬çº¦æŸè¯­æ³•**:

| è¯­æ³• | è¯´æ˜ | ç¤ºä¾‹ | åŒ¹é…ç‰ˆæœ¬ |
|------|------|------|----------|
| `1.2.3` | ç²¾ç¡®ç‰ˆæœ¬ | `1.2.3` | 1.2.3 |
| `^1.2.3` | å…¼å®¹ç‰ˆæœ¬ | `^1.2.3` | â‰¥1.2.3, <2.0.0 |
| `~1.2.3` | è¡¥ä¸ç‰ˆæœ¬ | `~1.2.3` | â‰¥1.2.3, <1.3.0 |
| `>=1.2.3` | å¤§äºç­‰äº | `>=1.2.3` | â‰¥1.2.3 |
| `<2.0.0` | å°äº | `<2.0.0` | <2.0.0 |
| `1.x` | é€šé…ç¬¦ | `1.x` | â‰¥1.0.0, <2.0.0 |
| `*` | ä»»æ„ç‰ˆæœ¬ | `*` | ä»»æ„ç‰ˆæœ¬ |

#### 2. ä¾èµ–è§£æç®—æ³•ï¼ˆç®€åŒ–ç‰ˆï¼‰

```
ç®—æ³•: ResolveDependencies(root_package)

1. åˆå§‹åŒ–:
   - åˆ›å»ºç©ºçš„ä¾èµ–å›¾ G
   - åˆ›å»ºå¾…å¤„ç†é˜Ÿåˆ— Q
   - åˆ›å»ºå·²è§£ææ˜ å°„ M (name -> version)

2. å°†æ ¹åŒ…åŠ å…¥é˜Ÿåˆ— Q

3. å½“ Q éç©º:
   a. å–å‡ºåŒ… P
   b. å¯¹äº P çš„æ¯ä¸ªä¾èµ– D:
      i.   è·å– D çš„ç‰ˆæœ¬çº¦æŸ C
      ii.  å¦‚æœ M ä¸­å·²æœ‰ D:
           - æ£€æŸ¥ç°æœ‰ç‰ˆæœ¬æ˜¯å¦æ»¡è¶³ C
           - å¦‚æœä¸æ»¡è¶³ï¼Œå°è¯•æ‰¾åˆ°å…¼å®¹ç‰ˆæœ¬
           - å¦‚æœæ‰¾ä¸åˆ°ï¼ŒæŠ¥é”™ï¼ˆç‰ˆæœ¬å†²çªï¼‰
      iii. å¦åˆ™:
           - é€‰æ‹©æ»¡è¶³ C çš„æœ€æ–°ç¨³å®šç‰ˆæœ¬ V
           - å°† (D, V) åŠ å…¥ M
           - å°† D åŠ å…¥ Q
      iv.  åœ¨ G ä¸­æ·»åŠ è¾¹ P -> D

4. æ£€æµ‹å¾ªç¯ä¾èµ–:
   - å¯¹ G è¿›è¡Œæ‹“æ‰‘æ’åº
   - å¦‚æœå­˜åœ¨ç¯ï¼ŒæŠ¥é”™

5. è¿”å› Mï¼ˆè§£æç»“æœï¼‰
```

#### 3. å†²çªè§£å†³ç­–ç•¥

**ç­–ç•¥1: æœ€å°ç‰ˆæœ¬é€‰æ‹© (Minimal Version Selection)**
- ç±»ä¼¼ Go modules
- é€‰æ‹©æ»¡è¶³æ‰€æœ‰çº¦æŸçš„æœ€å°ç‰ˆæœ¬
- ä¼˜ç‚¹: ç¨³å®šã€å¯é¢„æµ‹
- ç¼ºç‚¹: å¯èƒ½é”™è¿‡ bug ä¿®å¤

**ç­–ç•¥2: æœ€å¤§å…¼å®¹ç‰ˆæœ¬ (Maximum Compatible Version)**
- ç±»ä¼¼ npm
- é€‰æ‹©æ»¡è¶³æ‰€æœ‰çº¦æŸçš„æœ€å¤§ç‰ˆæœ¬
- ä¼˜ç‚¹: è‡ªåŠ¨è·å¾—æœ€æ–°ç‰¹æ€§å’Œä¿®å¤
- ç¼ºç‚¹: å¯èƒ½å¼•å…¥ä¸å…¼å®¹å˜æ›´

**æ¨è: é‡‡ç”¨ç­–ç•¥1ï¼ˆæœ€å°ç‰ˆæœ¬é€‰æ‹©ï¼‰**
- æ›´ç¬¦åˆ Sola çš„"ç®€å•ã€å¯é "ç†å¿µ
- ç”¨æˆ·å¯é€šè¿‡ `sola update` ä¸»åŠ¨æ›´æ–°

---

## ä¸­å¤®ä»“åº“è®¾è®¡

### ä»“åº“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 CDN / è¾¹ç¼˜èŠ‚ç‚¹                    â”‚
â”‚         (é™æ€æ–‡ä»¶åˆ†å‘ã€åŒ…ä¸‹è½½åŠ é€Ÿ)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              è´Ÿè½½å‡è¡¡å™¨ (Nginx)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ API 1   â”‚  â”‚ API 2  â”‚  â”‚ API 3  â”‚
â”‚ (Go)    â”‚  â”‚ (Go)   â”‚  â”‚ (Go)   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
     â”‚           â”‚           â”‚
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚           â”‚           â”‚
â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ æ•°æ®åº“   â”‚  â”‚Redis â”‚  â”‚ å¯¹è±¡    â”‚
â”‚(Postgres)â”‚  â”‚(ç¼“å­˜)â”‚  â”‚å­˜å‚¨(S3) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### API ç«¯ç‚¹è®¾è®¡

#### 1. åŒ…æŸ¥è¯¢

```
GET /api/v1/packages/{name}

å“åº”:
{
  "name": "json-parser",
  "description": "é«˜æ€§èƒ½ JSON è§£æåº“",
  "latest_version": "2.1.5",
  "author": "Zhang San",
  "license": "MIT",
  "repository": "https://github.com/org/json-parser",
  "downloads": 50123,
  "stars": 1234,
  "created_at": "2025-01-01T00:00:00Z",
  "updated_at": "2026-01-05T12:00:00Z",
  "versions": [
    "2.1.5",
    "2.1.4",
    "2.1.3",
    ...
  ]
}
```

#### 2. åŒ…ç‰ˆæœ¬è¯¦æƒ…

```
GET /api/v1/packages/{name}/{version}

å“åº”:
{
  "name": "json-parser",
  "version": "2.1.5",
  "description": "...",
  "dependencies": {
    "utils": "^1.0.0"
  },
  "dev_dependencies": {},
  "sola_version": ">=0.1.0",
  "checksum": "sha256:abc123...",
  "download_url": "https://cdn.sola.org/packages/json-parser/2.1.5.tar.gz",
  "size": 245632,
  "published_at": "2026-01-05T12:00:00Z"
}
```

#### 3. åŒ…æœç´¢

```
GET /api/v1/search?q={query}&page={page}&limit={limit}

å“åº”:
{
  "total": 156,
  "page": 1,
  "limit": 20,
  "results": [
    {
      "name": "json-parser",
      "version": "2.1.5",
      "description": "...",
      "downloads": 50123,
      "stars": 1234
    },
    ...
  ]
}
```

#### 4. åŒ…å‘å¸ƒ

```
POST /api/v1/packages
Headers:
  Authorization: Bearer <token>
  Content-Type: multipart/form-data

Body:
  file: <package.tar.gz>
  metadata: <sola.toml å†…å®¹>

å“åº”:
{
  "success": true,
  "message": "Package published successfully",
  "package": {
    "name": "my-lib",
    "version": "1.0.0",
    "url": "https://registry.sola-lang.org/packages/my-lib"
  }
}
```

### åŒ…æ–‡ä»¶æ ¼å¼

å‘å¸ƒåˆ°ä»“åº“çš„åŒ…ä½¿ç”¨ tar.gz å‹ç¼©æ ¼å¼ï¼š

```
my-lib-1.0.0.tar.gz
â”œâ”€â”€ sola.toml              # å¿…éœ€
â”œâ”€â”€ README.md              # æ¨è
â”œâ”€â”€ LICENSE                # å¿…éœ€ï¼ˆå¼€æºï¼‰
â”œâ”€â”€ CHANGELOG.md           # æ¨è
â””â”€â”€ src/                   # æºä»£ç 
    â””â”€â”€ ...
```

### å®‰å…¨æœºåˆ¶

1. **åŒ…ç­¾å**: ä½¿ç”¨ GPG ç­¾åéªŒè¯åŒ…å®Œæ•´æ€§
2. **æ ¡éªŒå’Œ**: SHA-256 æ ¡éªŒå’Œé˜²æ­¢ç¯¡æ”¹
3. **Token è®¤è¯**: å‘å¸ƒåŒ…éœ€è¦è®¤è¯ token
4. **æ¶æ„ä»£ç æ‰«æ**: è‡ªåŠ¨æ‰«æå¸¸è§æ¶æ„æ¨¡å¼
5. **é€Ÿç‡é™åˆ¶**: é˜²æ­¢ API æ»¥ç”¨

---

## å®æ–½ç»†èŠ‚

### Phase 1 å®æ–½æ¸…å•

#### 1.1 TOML é…ç½®è§£æ

**ä¾èµ–åº“**: ä½¿ç”¨ Go çš„ `github.com/pelletier/go-toml/v2`

**å®ç°æ–‡ä»¶**: `internal/pkg/config.go`

```go
type PackageConfig struct {
    Package      PackageInfo            `toml:"package"`
    Dependencies map[string]Dependency  `toml:"dependencies"`
    DevDeps      map[string]Dependency  `toml:"dev-dependencies"`
    Build        BuildConfig            `toml:"build"`
    // ...
}

func LoadConfig(path string) (*PackageConfig, error)
func (c *PackageConfig) Validate() error
func (c *PackageConfig) Save(path string) error
```

#### 1.2 sola init å‘½ä»¤

**å®ç°æ–‡ä»¶**: `cmd/sola/cmd_init.go`

```go
func cmdInit(args []string) {
    // 1. è§£æå‘½ä»¤è¡Œå‚æ•°
    // 2. äº¤äº’å¼è¯¢é—®é¡¹ç›®ä¿¡æ¯ï¼ˆå¦‚æœéœ€è¦ï¼‰
    // 3. ç”Ÿæˆ sola.toml
    // 4. ç”Ÿæˆ src/main.sola
    // 5. ç”Ÿæˆ README.md
    // 6. ç”Ÿæˆ .gitignore
}
```

**ç”Ÿæˆçš„ main.sola æ¨¡æ¿**:

```sola
namespace {{package_name}}

use sola.io.Console;

/**
 * åº”ç”¨ç¨‹åºå…¥å£
 */
function main(): void {
    Console::writeln("Hello, Sola!");
}
```

#### 1.3 sola new å‘½ä»¤

**å®ç°æ–‡ä»¶**: `cmd/sola/cmd_new.go`

**å†…ç½®æ¨¡æ¿**: `internal/pkg/templates/`

```
templates/
â”œâ”€â”€ basic/
â”‚   â”œâ”€â”€ sola.toml.tmpl
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â””â”€â”€ main.sola.tmpl
â”‚   â””â”€â”€ README.md.tmpl
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ sola.toml.tmpl
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ main.sola.tmpl
â”‚   â”‚   â”œâ”€â”€ server.sola.tmpl
â”‚   â”‚   â””â”€â”€ routes.sola.tmpl
â”‚   â””â”€â”€ README.md.tmpl
â””â”€â”€ lib/
    â”œâ”€â”€ sola.toml.tmpl
    â”œâ”€â”€ src/
    â”‚   â””â”€â”€ lib.sola.tmpl
    â””â”€â”€ README.md.tmpl
```

### Phase 2 å®æ–½æ¸…å•

#### 2.1 æ¨¡å—è·¯å¾„è§£æ

**å®ç°æ–‡ä»¶**: `internal/pkg/resolver.go`

```go
type PathResolver struct {
    config       *PackageConfig
    stdlibPath   string
    projectRoot  string
    cachePath    string
}

// è§£æ namespace åˆ°æ–‡ä»¶è·¯å¾„
func (r *PathResolver) ResolveNamespace(ns string) (string, error)

// è§£æå¯¼å…¥è¯­å¥
func (r *PathResolver) ResolveImport(importPath string) (*Module, error)
```

**è§£æé€»è¾‘**:

```
use sola.json.Json

1. æ£€æŸ¥æ˜¯å¦æ˜¯æ ‡å‡†åº“: sola.* -> $SOLA_ROOT/lib/
2. æ£€æŸ¥æ˜¯å¦æ˜¯é¡¹ç›®å†…: my.app.* -> src/
3. æ£€æŸ¥æ˜¯å¦æ˜¯ä¾èµ–: third.party.* -> ~/.sola/packages/
```

#### 2.2 é›†æˆåˆ°ç¼–è¯‘å™¨

ä¿®æ”¹ `internal/compiler/compiler.go`:

```go
// æ·»åŠ æ¨¡å—è§£æå™¨
type Compiler struct {
    // ç°æœ‰å­—æ®µ...
    resolver *pkg.PathResolver
}

// åœ¨å¤„ç† use è¯­å¥æ—¶è°ƒç”¨è§£æå™¨
func (c *Compiler) compileUseStmt(stmt *ast.UseStmt) {
    module, err := c.resolver.ResolveImport(stmt.Path)
    if err != nil {
        c.error("æ— æ³•æ‰¾åˆ°æ¨¡å—: %s", stmt.Path)
    }
    // åŠ è½½å¹¶ç¼–è¯‘æ¨¡å—
}
```

### Phase 3 å®æ–½æ¸…å•

#### 3.1 ä¾èµ–è§£æå™¨

**å®ç°æ–‡ä»¶**: `internal/pkg/dependency.go`

```go
type DependencyResolver struct {
    config      *PackageConfig
    lockfile    *Lockfile
    downloader  *Downloader
}

func (r *DependencyResolver) Resolve() (*DependencyGraph, error)
func (r *DependencyResolver) Install(pkgName, version string) error
```

#### 3.2 é”æ–‡ä»¶ç”Ÿæˆ

**å®ç°æ–‡ä»¶**: `internal/pkg/lockfile.go`

```go
type Lockfile struct {
    Version      int
    SolaVersion  string
    GeneratedAt  time.Time
    Packages     []LockedPackage
}

func (l *Lockfile) Save(path string) error
func LoadLockfile(path string) (*Lockfile, error)
```

### Phase 4 å®æ–½æ¸…å•

#### 4.1 SemVer è§£æ

**ä¾èµ–åº“**: ä½¿ç”¨ `github.com/Masterminds/semver/v3`

**å®ç°æ–‡ä»¶**: `internal/pkg/version.go`

```go
func ParseConstraint(constraint string) (*semver.Constraints, error)
func SelectVersion(available []*semver.Version, constraint *semver.Constraints) (*semver.Version, error)
```

### Phase 5 å®æ–½æ¸…å•

#### 5.1 ä»“åº“å®¢æˆ·ç«¯

**å®ç°æ–‡ä»¶**: `internal/pkg/registry.go`

```go
type RegistryClient struct {
    baseURL string
    httpClient *http.Client
    token   string
}

func (c *RegistryClient) Search(query string) ([]Package, error)
func (c *RegistryClient) GetPackage(name, version string) (*PackageMetadata, error)
func (c *RegistryClient) Download(name, version string, dest string) error
func (c *RegistryClient) Publish(pkgPath string) error
```

#### 5.2 ä¸‹è½½ç®¡ç†å™¨

**å®ç°æ–‡ä»¶**: `internal/pkg/download.go`

```go
type Downloader struct {
    client      *RegistryClient
    cachePath   string
    parallelism int
}

func (d *Downloader) DownloadPackage(name, version string) error
func (d *Downloader) VerifyChecksum(path, expectedSum string) error
```

---

## æµ‹è¯•è®¡åˆ’

### å•å…ƒæµ‹è¯•

```go
// internal/pkg/config_test.go
func TestLoadConfig(t *testing.T)
func TestConfigValidation(t *testing.T)

// internal/pkg/resolver_test.go
func TestResolveNamespace(t *testing.T)
func TestResolveImport(t *testing.T)

// internal/pkg/version_test.go
func TestVersionParsing(t *testing.T)
func TestVersionConstraints(t *testing.T)
```

### é›†æˆæµ‹è¯•

```bash
#!/bin/bash
# tests/integration/pkg_test.sh

# æµ‹è¯•é¡¹ç›®åˆå§‹åŒ–
sola init --name test.app
assert_file_exists sola.toml
assert_file_exists src/main.sola

# æµ‹è¯•ä¾èµ–å®‰è£…
sola get test-lib@1.0.0
assert_dir_exists ~/.sola/packages/registry/test-lib/1.0.0

# æµ‹è¯•è¿è¡Œ
sola run src/main.sola
assert_exit_code 0
```

### ç«¯åˆ°ç«¯æµ‹è¯•

åˆ›å»ºå®Œæ•´çš„æµ‹è¯•åœºæ™¯ï¼Œæ¨¡æ‹ŸçœŸå®ä½¿ç”¨æµç¨‹ã€‚

---

## é‡Œç¨‹ç¢‘ä¸äº¤ä»˜ç‰©

### Milestone 1: åŸºç¡€æ¡†æ¶ (1 å‘¨)
- [x] TOML é…ç½®è§£æ
- [x] `sola init` å‘½ä»¤
- [x] `sola new` å‘½ä»¤
- [x] é¡¹ç›®æ¨¡æ¿ç³»ç»Ÿ

### Milestone 2: æœ¬åœ°ä¾èµ– (1 å‘¨)
- [ ] æ¨¡å—è·¯å¾„è§£æ
- [ ] ç¼–è¯‘å™¨é›†æˆ
- [ ] é¡¹ç›®å†…å¯¼å…¥æ”¯æŒ
- [ ] æ ‡å‡†åº“å¯¼å…¥æ”¯æŒ

### Milestone 3: ç¬¬ä¸‰æ–¹ä¾èµ– (1.5 å‘¨)
- [ ] ä¾èµ–é…ç½®è§£æ
- [ ] æœ¬åœ°è·¯å¾„ä¾èµ–
- [ ] é”æ–‡ä»¶ç”Ÿæˆ
- [ ] `sola get` å‘½ä»¤

### Milestone 4: ç‰ˆæœ¬ç®¡ç† (1 å‘¨)
- [ ] SemVer è§£æ
- [ ] ä¾èµ–å›¾æ„å»º
- [ ] ç‰ˆæœ¬å†²çªè§£å†³
- [ ] `sola update` å‘½ä»¤

### Milestone 5: ä¸­å¤®ä»“åº“ (2 å‘¨)
- [ ] ä»“åº“ API è®¾è®¡
- [ ] å®¢æˆ·ç«¯å®ç°
- [ ] ä¸‹è½½ç®¡ç†
- [ ] `sola publish` å‘½ä»¤
- [ ] `sola search` å‘½ä»¤

### Milestone 6: ä¼˜åŒ–ä¸å®Œå–„ (æŒç»­)
- [ ] æ€§èƒ½ä¼˜åŒ–
- [ ] é”™è¯¯å¤„ç†å®Œå–„
- [ ] æ–‡æ¡£ç¼–å†™
- [ ] ç¤ºä¾‹é¡¹ç›®

---

## é£é™©ä¸æŒ‘æˆ˜

### æŠ€æœ¯é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| ä¾èµ–å†²çªè§£å†³å¤æ‚ | é«˜ | ä¸­ | å…ˆå®ç°ç®€å•ç­–ç•¥ï¼Œé€æ­¥ä¼˜åŒ– |
| ç½‘ç»œä¸‹è½½ä¸ç¨³å®š | ä¸­ | é«˜ | æ·»åŠ é‡è¯•ã€æ–­ç‚¹ç»­ä¼  |
| å®‰å…¨æ¼æ´ | é«˜ | ä½ | ä»£ç å®¡è®¡ã€åŒ…ç­¾åéªŒè¯ |
| æ€§èƒ½é—®é¢˜ | ä¸­ | ä¸­ | æ€§èƒ½æµ‹è¯•ã€ç¼“å­˜ä¼˜åŒ– |

### ä¸šåŠ¡é£é™©

| é£é™© | å½±å“ | æ¦‚ç‡ | ç¼“è§£æªæ–½ |
|------|------|------|----------|
| ç”Ÿæ€ä¸æ´»è·ƒ | é«˜ | ä¸­ | æä¾›ä¼˜è´¨æ ‡å‡†åº“ï¼Œé¼“åŠ±è´¡çŒ® |
| ä»“åº“è¿ç»´æˆæœ¬é«˜ | ä¸­ | ä½ | ä½¿ç”¨ CDNã€å¯¹è±¡å­˜å‚¨ |
| æ¶æ„åŒ…æ±¡æŸ“ | é«˜ | ä¸­ | å®¡æ ¸æœºåˆ¶ã€ç¤¾åŒºä¸¾æŠ¥ |

---

## å‚è€ƒèµ„æ–™

### æˆç†ŸåŒ…ç®¡ç†å™¨

1. **Go Modules**
   - æ–‡æ¡£: https://go.dev/ref/mod
   - ç‰¹ç‚¹: ç®€æ´ã€å»ä¸­å¿ƒåŒ–ã€æœ€å°ç‰ˆæœ¬é€‰æ‹©
   - å€Ÿé‰´: é…ç½®æ–‡ä»¶æ ¼å¼ã€ç‰ˆæœ¬ç­–ç•¥

2. **Cargo (Rust)**
   - æ–‡æ¡£: https://doc.rust-lang.org/cargo/
   - ç‰¹ç‚¹: TOML é…ç½®ã€å¼ºå¤§çš„æ„å»ºç³»ç»Ÿ
   - å€Ÿé‰´: é…ç½®æ–‡ä»¶ç»“æ„ã€ç‰¹æ€§å¼€å…³

3. **npm (Node.js)**
   - æ–‡æ¡£: https://docs.npmjs.com/
   - ç‰¹ç‚¹: åºå¤§ç”Ÿæ€ã€ä¸­å¤®ä»“åº“
   - å€Ÿé‰´: ä»“åº“æ¶æ„ã€å‘å¸ƒæµç¨‹

4. **pip (Python)**
   - æ–‡æ¡£: https://pip.pypa.io/
   - ç‰¹ç‚¹: ç®€å•æ˜“ç”¨ã€ä¸°å¯Œçš„åŒ…æº
   - å€Ÿé‰´: åŒ…ç´¢å¼•ã€é•œåƒæ”¯æŒ

### æŠ€æœ¯è§„èŒƒ

- Semantic Versioning: https://semver.org/
- TOML: https://toml.io/
- REST API è®¾è®¡: https://restfulapi.net/

---

## é™„å½•

### A. é…ç½®æ–‡ä»¶ç¤ºä¾‹é›†åˆ

#### ç¤ºä¾‹ 1: ç®€å•åº”ç”¨

```toml
[package]
name = "hello.world"
version = "1.0.0"
main = "src/main.sola"

[dependencies]
sola-json = "2.1.0"
```

#### ç¤ºä¾‹ 2: Web æ¡†æ¶

```toml
[package]
name = "web.framework"
version = "3.0.0"
description = "Modern web framework for Sola"
license = "MIT"

[dependencies]
http-server = "^2.0.0"
router = "~1.5.0"
template-engine = "1.x"

[dev-dependencies]
test-framework = "1.0.0"

[features]
default = ["json"]
json = ["sola-json"]
database = ["db-driver"]
```

#### ç¤ºä¾‹ 3: Workspace (Monorepo)

```toml
[workspace]
members = [
    "packages/core",
    "packages/http",
    "packages/db"
]

[workspace.dependencies]
# å…±äº«ä¾èµ–ç‰ˆæœ¬
json-parser = "2.1.0"
```

---

### B. å‘½ä»¤é€ŸæŸ¥è¡¨

| å‘½ä»¤ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `sola init` | åˆå§‹åŒ–é¡¹ç›® | `sola init my.app` |
| `sola new` | åˆ›å»ºæ–°é¡¹ç›® | `sola new my-app` |
| `sola get` | å®‰è£…ä¾èµ– | `sola get json-parser` |
| `sola publish` | å‘å¸ƒåŒ… | `sola publish` |
| `sola search` | æœç´¢åŒ… | `sola search http` |
| `sola update` | æ›´æ–°ä¾èµ– | `sola update` |
| `sola graph` | ä¾èµ–å›¾ | `sola graph` |
| `sola tidy` | æ¸…ç† | `sola tidy --cache` |

---

### C. é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ |
|--------|------|
| PKG001 | é…ç½®æ–‡ä»¶ä¸å­˜åœ¨ |
| PKG002 | é…ç½®æ–‡ä»¶æ ¼å¼é”™è¯¯ |
| PKG003 | åŒ…ä¸å­˜åœ¨ |
| PKG004 | ç‰ˆæœ¬å†²çª |
| PKG005 | å¾ªç¯ä¾èµ– |
| PKG006 | ç½‘ç»œé”™è¯¯ |
| PKG007 | æ ¡éªŒå’Œä¸åŒ¹é… |
| PKG008 | è®¤è¯å¤±è´¥ |

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2026-01-10  
**ç»´æŠ¤è€…**: Sola å¼€å‘å›¢é˜Ÿ
