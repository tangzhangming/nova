# Sola è¯­è¨€é¡¹ç›®åˆ†ææŠ¥å‘Š

> åˆ†ææ—¥æœŸï¼š2026-01-05  
> ç‰ˆæœ¬ï¼šv0.1.0  
> åˆ†æç›®æ ‡ï¼šè¯„ä¼°é¡¹ç›®å½“å‰çŠ¶æ€å’Œæœªæ¥å‘å±•æ–¹å‘

---

## ç›®å½•

1. [é¡¹ç›®æ¦‚è¿°](#é¡¹ç›®æ¦‚è¿°)
2. [å·²å®ŒæˆåŠŸèƒ½](#å·²å®ŒæˆåŠŸèƒ½)
3. [å¾…å®Œå–„åŠŸèƒ½](#å¾…å®Œå–„åŠŸèƒ½)
4. [æ¶æ„è®¾è®¡](#æ¶æ„è®¾è®¡)
5. [æ ‡å‡†åº“](#æ ‡å‡†åº“)
6. [å¼€å‘å·¥å…·](#å¼€å‘å·¥å…·)
7. [æ€§èƒ½è¯„ä¼°](#æ€§èƒ½è¯„ä¼°)
8. [å‘å±•è·¯çº¿å›¾](#å‘å±•è·¯çº¿å›¾)

---

## é¡¹ç›®æ¦‚è¿°

Sola æ˜¯ä¸€é—¨ç¼–è¯‘å‹é™æ€ç±»å‹è¯­è¨€ï¼Œè¯­æ³•æ¥è¿‘ PHPï¼Œè¿è¡Œäº Go å®ç°çš„è‡ªå®šä¹‰è™šæ‹Ÿæœºã€‚

### æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| è¯æ³•åˆ†æ | âœ… å®Œæˆ | å®Œæ•´çš„ Token è§£æ |
| è¯­æ³•åˆ†æ | âœ… å®Œæˆ | é€’å½’ä¸‹é™è§£æå™¨ |
| AST æ„å»º | âœ… å®Œæˆ | å®Œæ•´çš„æŠ½è±¡è¯­æ³•æ ‘ |
| å­—èŠ‚ç ç¼–è¯‘ | âœ… å®Œæˆ | æ ˆå¼å­—èŠ‚ç ç”Ÿæˆ |
| è™šæ‹Ÿæœº | âœ… å®Œæˆ | é«˜æ•ˆçš„æ ˆå¼ VM |
| é¢å‘å¯¹è±¡ | âœ… å®Œæˆ | ç±»ã€ç»§æ‰¿ã€æ¥å£ã€æŠ½è±¡ç±» |
| ç±»å‹ç³»ç»Ÿ | ğŸ”„ è¿›è¡Œä¸­ | åŸºç¡€ç±»å‹æ£€æŸ¥å·²å®ç° |
| å¼‚å¸¸å¤„ç† | âœ… å®Œæˆ | å®Œæ•´çš„ try-catch-finally |
| åƒåœ¾å›æ”¶ | âœ… å®Œæˆ | ä¸‰è‰²æ ‡è®°æ¸…é™¤ç®—æ³• |
| æ¨¡å—ç³»ç»Ÿ | âœ… å®Œæˆ | namespace + use å¯¼å…¥ |

**å½“å‰çŠ¶æ€è¯„ä¼°ï¼šåŸå‹é˜¶æ®µ â†’ Alpha ç‰ˆæœ¬ï¼Œçº¦ 60% å®Œæˆåº¦**

---

## å·²å®ŒæˆåŠŸèƒ½

### 1. âœ… å¼‚å¸¸å¤„ç†ç³»ç»Ÿ

å®Œæ•´çš„ç±»å±‚æ¬¡ç»“æ„å¼‚å¸¸ç³»ç»Ÿï¼š

```
sola.lang.Throwable          # æ‰€æœ‰é”™è¯¯å’Œå¼‚å¸¸çš„åŸºç±»
â”œâ”€â”€ sola.lang.Exception      # å¼‚å¸¸åŸºç±»ï¼ˆå¯æ•è·çš„ï¼‰
â”‚   â””â”€â”€ sola.lang.RuntimeException  # è¿è¡Œæ—¶å¼‚å¸¸
â””â”€â”€ sola.lang.Error          # é”™è¯¯åŸºç±»ï¼ˆé€šå¸¸ä¸åº”æ•è·ï¼‰
```

**ç‰¹æ€§ï¼š**
- ç±»å‹åŒ–å¼‚å¸¸æ•è·ï¼ˆæŒ‰ç±»ç»§æ‰¿åŒ¹é…ï¼‰
- finally å—æ”¯æŒ
- å¼‚å¸¸é“¾ï¼ˆcauseï¼‰æ”¯æŒ
- å®Œæ•´çš„æ ˆè¿½è¸ªä¿¡æ¯
- è¿è¡Œæ—¶é”™è¯¯è‡ªåŠ¨è½¬æ¢ä¸ºå¯æ•è·å¼‚å¸¸ï¼ˆé™¤0ã€æ•°ç»„è¶Šç•Œç­‰ï¼‰

**ç¤ºä¾‹ï¼š**
```sola
use sola.lang.Exception;
use sola.lang.RuntimeException;

try {
    $arr := [1, 2, 3];
    echo $arr[10];  // æ•°ç»„è¶Šç•Œ
} catch (RuntimeException $e) {
    echo "è¿è¡Œæ—¶é”™è¯¯: " + $e->getMessage();
} catch (Exception $e) {
    echo "ä¸€èˆ¬å¼‚å¸¸: " + $e->getMessage();
} finally {
    echo "æ¸…ç†èµ„æº";
}
```

### 2. âœ… åƒåœ¾å›æ”¶æœºåˆ¶

å®ç°äº†ä¸‰è‰²æ ‡è®°æ¸…é™¤ç®—æ³•ï¼š

```go
type GC struct {
    heap          []*Object
    roots         []*Value
    threshold     int        // è§¦å‘ GC çš„é˜ˆå€¼
    enabled       bool
}
```

**ç‰¹æ€§ï¼š**
- è‡ªåŠ¨å†…å­˜ç®¡ç†
- å¯é…ç½®çš„è§¦å‘é˜ˆå€¼
- æ‰‹åŠ¨ GC æ§åˆ¶ API (`gc_collect()`, `gc_enable()`, `gc_disable()`)
- GC ç»Ÿè®¡ä¿¡æ¯ (`gc_stats()`)

### 3. âœ… é¢å‘å¯¹è±¡ç¼–ç¨‹

å®Œæ•´çš„ OOP æ”¯æŒï¼š

```sola
abstract class Animal {
    protected string $name;
    
    public function __construct(string $name) {
        $this->name = $name;
    }
    
    abstract public function speak(): string;
}

class Dog extends Animal implements Pet {
    public function speak(): string {
        return $this->name + " says: Woof!";
    }
}
```

**ç‰¹æ€§ï¼š**
- ç±»å’Œå¯¹è±¡
- ç»§æ‰¿ (extends)
- æ¥å£ (interface + implements)
- æŠ½è±¡ç±» (abstract class)
- è®¿é—®æ§åˆ¶ (public/protected/private)
- é™æ€æˆå‘˜ (static)
- æ„é€ å‡½æ•°/ææ„å‡½æ•°
- æšä¸¾ (enum)
- æ³¨è§£ (@Annotation)

### 4. âœ… ç±»å‹ç³»ç»Ÿ

æ”¯æŒçš„ç±»å‹ï¼š

| ç±»åˆ« | ç±»å‹ |
|------|------|
| æ•´æ•° | `int`, `i8`, `i16`, `i32`, `i64`, `uint`, `u8`, `u16`, `u32`, `u64` |
| æµ®ç‚¹ | `float`, `f32`, `f64` |
| å…¶ä»– | `bool`, `string`, `void`, `null` |
| å¤åˆ | `array`, `map<K,V>`, `object`, `func` |
| å¯ç©º | `?Type` (å¦‚ `?string`) |

### 5. âœ… æ§åˆ¶æµ

- æ¡ä»¶ï¼š`if` / `elseif` / `else`
- å¾ªç¯ï¼š`for` / `foreach` / `while` / `do-while`
- åˆ†æ”¯ï¼š`switch` / `case` / `default`
- è·³è½¬ï¼š`break` / `continue` / `return`

### 6. âœ… æ¨¡å—ç³»ç»Ÿ

```sola
namespace myapp.services

use sola.lang.Exception;
use sola.data.Redis;

public class UserService {
    // ...
}
```

---

## å¾…å®Œå–„åŠŸèƒ½

### 1. ğŸŸ¡ ç±»å‹æ£€æŸ¥å¢å¼º

å½“å‰ç±»å‹æ£€æŸ¥è¾ƒå¼±ï¼Œéœ€è¦å®Œå–„ï¼š

- [ ] å‡½æ•°å‚æ•°ç±»å‹ä¸¥æ ¼æ£€æŸ¥
- [ ] è¿”å›å€¼ç±»å‹éªŒè¯
- [ ] æ³›å‹æ”¯æŒ
- [ ] ç±»å‹æ¨å¯¼ä¼˜åŒ–

### 2. ğŸŸ¡ æ ‡å‡†åº“æ‰©å±•

éœ€è¦æ·»åŠ çš„æ¨¡å—ï¼š

| æ¨¡å— | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|--------|------|
| æ–‡ä»¶ I/O | P0 | å¾…å¼€å‘ |
| JSON | P0 | å¾…å¼€å‘ |
| æ—¶é—´æ—¥æœŸ | P0 | å¾…å¼€å‘ |
| HTTP å®¢æˆ·ç«¯ | P1 | å¾…å¼€å‘ |
| æ­£åˆ™è¡¨è¾¾å¼ | P1 | å¾…å¼€å‘ |
| åŠ å¯†/å“ˆå¸Œ | P2 | å¾…å¼€å‘ |

### 3. ğŸŸ¡ å¹¶å‘æ”¯æŒ

å½“å‰æ— å¹¶å‘æ¨¡å‹ï¼Œè®¡åˆ’æ”¯æŒï¼š

- [ ] åç¨‹ (async/await)
- [ ] Channel é€šä¿¡
- [ ] å¹¶å‘åŸè¯­ (Mutex, WaitGroup)

### 4. ğŸŸ¡ ç¼–è¯‘ä¼˜åŒ–

å½“å‰ç¼–è¯‘å™¨æ— ä¼˜åŒ– passï¼š

- [ ] å¸¸é‡æŠ˜å 
- [ ] æ­»ä»£ç æ¶ˆé™¤
- [ ] å†…è”ä¼˜åŒ–
- [ ] å°¾è°ƒç”¨ä¼˜åŒ–

---

## æ¶æ„è®¾è®¡

### ç¼–è¯‘æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Source Code â”‚  .sola æ–‡ä»¶
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Lexer     â”‚  è¯æ³•åˆ†æ â†’ Token æµ
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Parser    â”‚  è¯­æ³•åˆ†æ â†’ AST
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Compiler   â”‚  ç¼–è¯‘ â†’ Bytecode
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     VM      â”‚  æ‰§è¡Œ â†’ ç»“æœ
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç›®å½•ç»“æ„

```
nova/
â”œâ”€â”€ cmd/sola/           # å‘½ä»¤è¡Œå…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ ast/            # æŠ½è±¡è¯­æ³•æ ‘å®šä¹‰
â”‚   â”œâ”€â”€ bytecode/       # å­—èŠ‚ç å®šä¹‰å’Œå€¼ç±»å‹
â”‚   â”œâ”€â”€ compiler/       # ç¼–è¯‘å™¨å®ç°
â”‚   â”œâ”€â”€ i18n/           # å›½é™…åŒ–
â”‚   â”œâ”€â”€ loader/         # æ¨¡å—åŠ è½½å™¨
â”‚   â”œâ”€â”€ parser/         # è¯­æ³•è§£æå™¨
â”‚   â”œâ”€â”€ runtime/        # è¿è¡Œæ—¶
â”‚   â”œâ”€â”€ token/          # Token å®šä¹‰
â”‚   â””â”€â”€ vm/             # è™šæ‹Ÿæœºå®ç°
â”œâ”€â”€ lib/                # æ ‡å‡†åº“ (Sola æºç )
â”‚   â”œâ”€â”€ lang/           # æ ¸å¿ƒç±» (Throwable, Exception)
â”‚   â”œâ”€â”€ io/             # I/O ç±»
â”‚   â”œâ”€â”€ data/           # æ•°æ®ç±» (Redis)
â”‚   â”œâ”€â”€ math/           # æ•°å­¦å‡½æ•°
â”‚   â””â”€â”€ net/            # ç½‘ç»œç±»
â”œâ”€â”€ editor/             # ç¼–è¾‘å™¨æ’ä»¶
â”‚   â””â”€â”€ sublime-text/   # Sublime Text æ”¯æŒ
â””â”€â”€ examples/           # ç¤ºä¾‹ä»£ç 
```

---

## æ ‡å‡†åº“

### æ ¸å¿ƒç±» (sola.lang)

| ç±» | è¯´æ˜ |
|-----|------|
| `Throwable` | æ‰€æœ‰å¼‚å¸¸çš„åŸºç±» |
| `Exception` | å¯æ•è·å¼‚å¸¸åŸºç±» |
| `RuntimeException` | è¿è¡Œæ—¶å¼‚å¸¸ |
| `Error` | é”™è¯¯åŸºç±» |

### I/O ç±» (sola.io)

| ç±» | è¯´æ˜ |
|-----|------|
| `Console` | æ§åˆ¶å°è¾“å‡º |

### æ•°æ®ç±» (sola.data)

| ç±» | è¯´æ˜ |
|-----|------|
| `Redis` | Redis å®¢æˆ·ç«¯ï¼ˆå®Œæ•´ RESP åè®®å®ç°ï¼‰|

### ç½‘ç»œç±» (sola.net)

| ç±» | è¯´æ˜ |
|-----|------|
| `TcpClient` | TCP å®¢æˆ·ç«¯ |

### å†…ç½®å‡½æ•°

```sola
// è¾“å‡º
print($args...)          echo $text

// ç±»å‹æ£€æŸ¥
typeof($val)             is_null($val)       is_bool($val)
is_int($val)             is_float($val)      is_string($val)
is_array($val)           is_map($val)        is_object($val)

// ç±»å‹è½¬æ¢
to_int($val)             to_float($val)
to_string($val)          to_bool($val)

// æ•°ç»„æ“ä½œ
len($arr)                push($arr, $val)    pop($arr)
shift($arr)              unshift($arr, $val) slice($arr, $start, $end)
concat($arr1, $arr2)     reverse($arr)       contains($arr, $val)
index_of($arr, $val)

// å­—ç¬¦ä¸²æ“ä½œ
strlen($str)             substr($str, $start, $len)
str_upper($str)          str_lower($str)     str_trim($str)
str_split($str, $sep)    str_join($arr, $sep)
str_replace($str, $old, $new)
str_contains($str, $sub) str_starts_with($str, $prefix)
str_ends_with($str, $suffix)

// æ•°å­¦å‡½æ•°
abs($n)    min($a, $b)    max($a, $b)
floor($n)  ceil($n)       round($n)

// GC æ§åˆ¶
gc_collect()     gc_enable()      gc_disable()
gc_stats()       gc_set_threshold($n)

// åå°„
get_class($obj)  get_class_annotations($class)
get_method_annotations($class, $method)
has_annotation($class, $annotation)
```

---

## å¼€å‘å·¥å…·

### Sublime Text æ’ä»¶

ä½ç½®ï¼š`editor/sublime-text/`

**åŠŸèƒ½ï¼š**
- è¯­æ³•é«˜äº®
- ä»£ç è¡¥å…¨
- ä»£ç ç‰‡æ®µ

**å®‰è£…ï¼š**
```powershell
# Windows
$dest = "$env:APPDATA\Sublime Text\Packages\Sola"
New-Item -ItemType Directory -Force -Path $dest
Copy-Item editor\sublime-text\* $dest
```

### å‘½ä»¤è¡Œå·¥å…·

```bash
# è¿è¡Œç¨‹åº
sola run main.sola

# è¯­æ³•æ£€æŸ¥
sola check main.sola

# æ˜¾ç¤ºå­—èŠ‚ç 
sola run -bytecode main.sola

# æ˜¾ç¤º AST
sola run -ast main.sola

# æ˜¾ç¤º Token
sola run -tokens main.sola
```

---

## æ€§èƒ½è¯„ä¼°

### VM é™åˆ¶

| å‚æ•° | å€¼ | è¯´æ˜ |
|------|-----|------|
| æ ˆæ·±åº¦ | 256 | æ“ä½œæ•°æ ˆæœ€å¤§æ·±åº¦ |
| è°ƒç”¨æ ˆ | 64 | æœ€å¤§é€’å½’æ·±åº¦ |
| è·³è½¬èŒƒå›´ | Â±32KB | å•å‡½æ•°å­—èŠ‚ç é™åˆ¶ |

### GC æ€§èƒ½

- è§¦å‘é˜ˆå€¼ï¼šå¯é…ç½®ï¼ˆé»˜è®¤è‡ªåŠ¨è°ƒæ•´ï¼‰
- ç®—æ³•ï¼šä¸‰è‰²æ ‡è®°æ¸…é™¤
- åœé¡¿ï¼šå…¨åœé¡¿ï¼ˆStop-The-Worldï¼‰

---

## å‘å±•è·¯çº¿å›¾

### Phase 1: ç¨³å®šæ ¸å¿ƒ (å½“å‰)

| ä»»åŠ¡ | çŠ¶æ€ | ä¼˜å…ˆçº§ |
|------|------|--------|
| å¼‚å¸¸å¤„ç†ç³»ç»Ÿ | âœ… å®Œæˆ | P0 |
| åƒåœ¾å›æ”¶ | âœ… å®Œæˆ | P0 |
| ç±»å‹æ£€æŸ¥å¢å¼º | ğŸ”„ è¿›è¡Œä¸­ | P0 |
| ç¼–è¾‘å™¨æ”¯æŒ | âœ… å®Œæˆ | P1 |

### Phase 2: æ ‡å‡†åº“ (ä¸‹ä¸€é˜¶æ®µ)

| ä»»åŠ¡ | é¢„ä¼°æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|----------|--------|
| æ–‡ä»¶ I/O | 2 å‘¨ | P0 |
| JSON è§£æ | 1 å‘¨ | P0 |
| æ—¶é—´æ—¥æœŸ | 1 å‘¨ | P0 |
| HTTP å®¢æˆ·ç«¯ | 2 å‘¨ | P1 |
| æ­£åˆ™è¡¨è¾¾å¼ | 1 å‘¨ | P1 |

### Phase 3: é«˜çº§ç‰¹æ€§ (æœªæ¥)

| ä»»åŠ¡ | é¢„ä¼°æ—¶é—´ | ä¼˜å…ˆçº§ |
|------|----------|--------|
| åç¨‹/å¹¶å‘ | 4 å‘¨ | P1 |
| ç¼–è¯‘ä¼˜åŒ– | 3 å‘¨ | P1 |
| æ³›å‹ | 4 å‘¨ | P2 |
| LSP æœåŠ¡å™¨ | 3 å‘¨ | P2 |
| åŒ…ç®¡ç†å™¨ | 2 å‘¨ | P2 |

---

## æ€»ç»“

### ä¼˜åŠ¿

1. **æ¸…æ™°çš„è®¾è®¡** - PHP è¯­æ³• + é™æ€ç±»å‹ï¼Œå­¦ä¹ æ›²çº¿å¹³ç¼“
2. **å®Œæ•´çš„ OOP** - ç±»ã€ç»§æ‰¿ã€æ¥å£ã€æŠ½è±¡ç±»å…¨æ”¯æŒ
3. **å¥å£®çš„å¼‚å¸¸å¤„ç†** - ç±»å±‚æ¬¡ç»“æ„ + finally + è¿è¡Œæ—¶é”™è¯¯å¯æ•è·
4. **è‡ªåŠ¨å†…å­˜ç®¡ç†** - ä¸‰è‰²æ ‡è®° GCï¼Œæ— éœ€æ‰‹åŠ¨ç®¡ç†
5. **å®ç”¨çš„æ ‡å‡†åº“** - Redis å®¢æˆ·ç«¯ç­‰ç”Ÿäº§çº§å®ç°

### å½“å‰å·®è·

1. **ç±»å‹æ£€æŸ¥** - éœ€è¦æ›´ä¸¥æ ¼çš„ç¼–è¯‘æœŸæ£€æŸ¥
2. **æ ‡å‡†åº“** - ç¼ºå°‘æ–‡ä»¶/JSON/HTTP ç­‰å¸¸ç”¨æ¨¡å—
3. **å¹¶å‘** - æ— åç¨‹/çº¿ç¨‹æ”¯æŒ
4. **å·¥å…·é“¾** - éœ€è¦ LSPã€è°ƒè¯•å™¨ç­‰

### è¯„ä¼°ç»“è®º

> Sola å·²ä»åŸå‹é˜¶æ®µè¿›å…¥ **Alpha ç‰ˆæœ¬**ï¼Œæ ¸å¿ƒåŠŸèƒ½å®Œå¤‡ï¼Œå¯ç”¨äºï¼š
> - å­¦ä¹ ç¼–è¯‘åŸç†
> - å°å‹è„šæœ¬ä»»åŠ¡
> - å†…éƒ¨å·¥å…·å¼€å‘
>
> è·ç¦»ç”Ÿäº§ç¯å¢ƒä½¿ç”¨è¿˜éœ€ **3-6 ä¸ªæœˆ** çš„æ ‡å‡†åº“å’Œå·¥å…·é“¾å®Œå–„ã€‚

---

*æŠ¥å‘Šç”± AI åŠ©æ‰‹ç”Ÿæˆï¼ŒåŸºäºå¯¹é¡¹ç›®æºç çš„å…¨é¢åˆ†æ*
